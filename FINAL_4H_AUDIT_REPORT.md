# –§–∏–Ω–∞–ª—å–Ω—ã–π –û—Ç—á–µ—Ç: –ü–æ–ª–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –ú–∏–≥—Ä–∞—Ü–∏–∏ 1h ‚Üí 4h

**–î–∞—Ç–∞:** 2025-11-13
**–ê–≤—Ç–æ—Ä:** Claude AI
**–í–µ—Ç–∫–∞:** claude/migrate-timeframe-1h-to-4h-01M59ekhzm3HZF2NCsVVLHWb

## üìä –†–µ–∑—é–º–µ

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ **–ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞** –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ 1h –Ω–∞ 4h.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ **1 –ø—Ä–æ–±–ª–µ–º–∞** –≤ —Ç–µ—Å—Ç–∞—Ö (GARCH –æ–∫–Ω–æ)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¢–∞–π–º—Ñ—Ä–µ–π–º–∞

| –§–∞–π–ª | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|----------|---------|
| `core_config.py:72` | `timeframe_ms` | `14_400_000` (4h) | ‚úÖ |
| `core_config.py:1061` | `SimulationConfig.execution_profile` | `MKT_OPEN_NEXT_4H` | ‚úÖ |
| `core_config.py:1099` | `LiveConfig.execution_profile` | `MKT_OPEN_NEXT_4H` | ‚úÖ |
| `core_config.py:1191` | `TrainConfig.execution_profile` | `MKT_OPEN_NEXT_4H` | ‚úÖ |
| `core_config.py:1217` | `EvalConfig.execution_profile` | `MKT_OPEN_NEXT_4H` | ‚úÖ |
| `configs/timing.yaml:3` | `timeframe_ms` | `14400000` (4h) | ‚úÖ |

### 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

| –§–∞–π–ª | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|----------|---------|
| `feature_pipe.py:271` | `sigma_window` | `42` (7 –¥–Ω–µ–π) | ‚úÖ |
| `no_trade.py:860` | `sigma_window` | `42` (7 –¥–Ω–µ–π) | ‚úÖ |
| `dynamic_no_trade_guard.py:104,106` | `sigma_window` | `42` (7 –¥–Ω–µ–π) | ‚úÖ |

### 3. –ü—Ä–∏–∑–Ω–∞–∫–∏ (Features)

#### SMA
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `sma_240` | 240 | 1 | 4h | ‚úÖ |
| `sma_720` | 720 | 3 | 12h | ‚úÖ |
| `sma_1200` | 1200 | 5 | 20h | ‚úÖ |
| `sma_1440` | 1440 | 6 | 24h | ‚úÖ |
| `sma_5040` | 5040 | 21 | 3.5d | ‚úÖ |
| `sma_10080` | 10080 | 42 | 7d | ‚úÖ |
| `sma_12000` | 12000 | 50 | 200h | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:962` –æ–∂–∏–¥–∞–µ—Ç `sma_1200` ‚úÖ
- `mediator.py:965` –æ–∂–∏–¥–∞–µ—Ç `sma_5040` ‚úÖ
- `mediator.py:1038` –æ–∂–∏–¥–∞–µ—Ç `sma_12000` ‚úÖ

#### Returns
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `ret_4h` | 240 | 1 | 4h | ‚úÖ |
| `ret_12h` | 720 | 3 | 12h | ‚úÖ |
| `ret_20h` | 1200 | 5 | 20h | ‚úÖ |
| `ret_24h` | 1440 | 6 | 24h | ‚úÖ |
| `ret_84h` | 5040 | 21 | 3.5d | ‚úÖ |
| `ret_7d` | 10080 | 42 | 7d | ‚úÖ |
| `ret_200h` | 12000 | 50 | 200h | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1033` –æ–∂–∏–¥–∞–µ—Ç `ret_12h` ‚úÖ
- `mediator.py:1034` –æ–∂–∏–¥–∞–µ—Ç `ret_24h` ‚úÖ
- `mediator.py:1037` –æ–∂–∏–¥–∞–µ—Ç `ret_4h` ‚úÖ

#### Yang-Zhang Volatility
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `yang_zhang_48h` | 2880 | 12 | 48h | ‚úÖ |
| `yang_zhang_7d` | 10080 | 42 | 7d | ‚úÖ |
| `yang_zhang_30d` | 43200 | 180 | 30d | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1029` –æ–∂–∏–¥–∞–µ—Ç `yang_zhang_48h` ‚úÖ
- `mediator.py:1030` –æ–∂–∏–¥–∞–µ—Ç `yang_zhang_7d` ‚úÖ
- `mediator.py:1039` –æ–∂–∏–¥–∞–µ—Ç `yang_zhang_30d` ‚úÖ

#### Parkinson Volatility
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `parkinson_48h` | 2880 | 12 | 48h | ‚úÖ |
| `parkinson_7d` | 10080 | 42 | 7d | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1040` –æ–∂–∏–¥–∞–µ—Ç `parkinson_48h` ‚úÖ
- `mediator.py:1041` –æ–∂–∏–¥–∞–µ—Ç `parkinson_7d` ‚úÖ

#### GARCH Volatility
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `garch_200h` | 12000 | 50 | 200h | ‚úÖ |
| `garch_14d` | 20160 | 84 | 14d | ‚úÖ |
| `garch_30d` | 43200 | 180 | 30d | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1031` –æ–∂–∏–¥–∞–µ—Ç `garch_200h` ‚úÖ
- `mediator.py:1032` –æ–∂–∏–¥–∞–µ—Ç `garch_14d` ‚úÖ
- `mediator.py:1042` –æ–∂–∏–¥–∞–µ—Ç `garch_30d` ‚úÖ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** GARCH —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 50 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π (—Å–º. `transformers.py:215`). –ü–æ—ç—Ç–æ–º—É –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ = 50 –±–∞—Ä–æ–≤ (200h), –∞ –Ω–µ 42 (7d).

#### CVD (Cumulative Volume Delta)
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `cvd_24h` | 1440 | 6 | 24h | ‚úÖ |
| `cvd_7d` | 10080 | 42 | 7d | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1027` –æ–∂–∏–¥–∞–µ—Ç `cvd_24h` ‚úÖ
- `mediator.py:1028` –æ–∂–∏–¥–∞–µ—Ç `cvd_7d` ‚úÖ

#### Taker Buy Ratio
| –ò–º—è –ø—Ä–∏–∑–Ω–∞–∫–∞ | –û–∫–Ω–æ (–º–∏–Ω—É—Ç—ã) | –û–∫–Ω–æ (–±–∞—Ä—ã) | –ü–µ—Ä–∏–æ–¥ | –°—Ç–∞—Ç—É—Å |
|--------------|---------------|-------------|---------|---------|
| `taker_buy_ratio_sma_8h` | 480 | 2 | 8h | ‚úÖ |
| `taker_buy_ratio_sma_16h` | 960 | 4 | 16h | ‚úÖ |
| `taker_buy_ratio_sma_24h` | 1440 | 6 | 24h | ‚úÖ |
| `taker_buy_ratio_momentum_4h` | 240 | 1 | 4h | ‚úÖ |
| `taker_buy_ratio_momentum_8h` | 480 | 2 | 8h | ‚úÖ |
| `taker_buy_ratio_momentum_12h` | 720 | 3 | 12h | ‚úÖ |
| `taker_buy_ratio_momentum_24h` | 1440 | 6 | 24h | ‚úÖ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:**
- `mediator.py:1044` –æ–∂–∏–¥–∞–µ—Ç `taker_buy_ratio_sma_24h` ‚úÖ
- `mediator.py:1047` –æ–∂–∏–¥–∞–µ—Ç `taker_buy_ratio_sma_8h` ‚úÖ
- `mediator.py:1048` –æ–∂–∏–¥–∞–µ—Ç `taker_buy_ratio_sma_16h` ‚úÖ

### 4. –ò–Ω–∂–µ—Å—Ç –î–∞–Ω–Ω—ã—Ö

| –§–∞–π–ª | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|----------|---------|
| `incremental_klines_4h.py:31` | `INTERVAL_MS` | `14_400_000` (4h) | ‚úÖ |

### 5. Make Features CLI

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|-------------------|---------|
| `--bar-duration-minutes` | `240` (4h) | ‚úÖ |
| `--lookbacks` | `240,720,1200,1440,5040,10080,12000` | ‚úÖ |
| `--yang-zhang-windows` | `2880,10080,43200` | ‚úÖ |
| `--parkinson-windows` | `2880,10080` | ‚úÖ |
| `--garch-windows` | `12000,20160,43200` | ‚úÖ |
| `--taker-buy-ratio-windows` | `480,960,1440` | ‚úÖ |
| `--taker-buy-ratio-momentum` | `240,480,720,1440` | ‚úÖ |
| `--cvd-windows` | `1440,10080` | ‚úÖ |

### 6. Execution Profiles

| –ü—Ä–æ—Ñ–∏–ª—å | –°—Ç–∞—Ç—É—Å | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
|---------|--------|--------------|
| `MKT_OPEN_NEXT_4H` | ‚úÖ | `decision_mode: CLOSE_TO_OPEN`, `delay: 8000ms` |
| `VWAP_CURRENT_4H` | ‚úÖ | `decision_mode: INTRA_HOUR_WITH_LATENCY`, `delay: 30000ms` |

---

## ‚ùå –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ #1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è GARCH –æ–∫–Ω–∞

**–§–∞–π–ª:** `test_fixes_verification.py:60-100`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–¢–µ—Å—Ç –æ–∂–∏–¥–∞–ª –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ GARCH = 42 –±–∞—Ä–∞ (7 –¥–Ω–µ–π), –Ω–æ **GARCH —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 50 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ (—Å–º. `transformers.py:215`).

**–ë—ã–ª–æ:**
```python
# –¢–µ—Å—Ç –æ–∂–∏–¥–∞–ª:
assert spec.garch_windows[0] == 42  # 7 –¥–Ω–µ–π - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
```

**–°—Ç–∞–ª–æ:**
```python
# –¢–µ—Å—Ç —Ç–µ–ø–µ—Ä—å –æ–∂–∏–¥–∞–µ—Ç:
assert spec.garch_windows[0] == 50  # 200h (–º–∏–Ω–∏–º—É–º –¥–ª—è GARCH) - –ü–†–ê–í–ò–õ–¨–ù–û!
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `transformers.py:215`: `if n < 50: return None` ‚Äî –º–∏–Ω–∏–º—É–º 50 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π
- `mediator.py:1031`: –æ–∂–∏–¥–∞–µ—Ç `garch_200h` (50 –±–∞—Ä–æ–≤ = 12000 –º–∏–Ω—É—Ç)
- `transformers.py:453`: –¥–µ—Ñ–æ–ª—Ç = `[50 * 240, ...]` = `[12000, ...]` –º–∏–Ω—É—Ç

---

## ‚úÖ –ß—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç –ü—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. –õ–æ–≥–∏–∫–∞ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –û–∫–æ–Ω

**–§–∞–π–ª:** `transformers.py:315-468` (FeatureSpec.__post_init__)

–í—Å–µ –æ–∫–Ω–∞ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è** –∏–∑ –º–∏–Ω—É—Ç –≤ –±–∞—Ä—ã:
```python
self.lookbacks_prices = [max(1, x // self.bar_duration_minutes) for x in self.lookbacks_prices]
```

–î–ª—è `bar_duration_minutes = 240`:
- 240 –º–∏–Ω—É—Ç ‚Üí 1 –±–∞—Ä ‚úÖ
- 12000 –º–∏–Ω—É—Ç ‚Üí 50 –±–∞—Ä–æ–≤ ‚úÖ
- –∏ —Ç.–¥.

### 2. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ü—Ä–∏–∑–Ω–∞–∫–æ–≤

**–§—É–Ω–∫—Ü–∏—è:** `_format_window_name` (`transformers.py:15-46`)

–ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏–º–µ–Ω–∞:
- –î–Ω–∏ (‚â•7d –∏ –∫—Ä–∞—Ç–Ω–æ 1440): `10080 ‚Üí "7d"` ‚úÖ
- –ß–∞—Å—ã (‚â•60 –∏ –∫—Ä–∞—Ç–Ω–æ 60): `240 ‚Üí "4h"` ‚úÖ
- –ú–∏–Ω—É—Ç—ã: `42 ‚Üí "42m"` ‚úÖ

**–ü—Ä–∏–º–µ—Ä—ã:**
- SMA –∏—Å–ø–æ–ª—å–∑—É—é—Ç **—Å—ã—Ä—ã–µ –º–∏–Ω—É—Ç—ã**: `sma_240`, `sma_12000` ‚úÖ
- Returns –∏—Å–ø–æ–ª—å–∑—É—é—Ç **—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞**: `ret_4h`, `ret_200h` ‚úÖ
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞**: `yang_zhang_7d`, `garch_200h` ‚úÖ

### 3. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É transformers.py –∏ mediator.py

**–í—Å–µ –∏–º–µ–Ω–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–ì–õ–ê–°–û–í–ê–ù–´** ‚úÖ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | transformers.py –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç | mediator.py –æ–∂–∏–¥–∞–µ—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|---------------------------|-------------------|--------|
| SMA | `sma_1200`, `sma_5040`, `sma_12000` | `sma_1200`, `sma_5040`, `sma_12000` | ‚úÖ |
| Returns | `ret_4h`, `ret_12h`, `ret_24h` | `ret_4h`, `ret_12h`, `ret_24h` | ‚úÖ |
| Yang-Zhang | `yang_zhang_48h`, `yang_zhang_7d`, `yang_zhang_30d` | ‚úÖ | ‚úÖ |
| Parkinson | `parkinson_48h`, `parkinson_7d` | ‚úÖ | ‚úÖ |
| GARCH | `garch_200h`, `garch_14d`, `garch_30d` | ‚úÖ | ‚úÖ |
| CVD | `cvd_24h`, `cvd_7d` | ‚úÖ | ‚úÖ |
| Taker Buy Ratio | –≤—Å–µ –∏–º–µ–Ω–∞ | ‚úÖ | ‚úÖ |

---

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: test_fixes_verification.py

**–°—Ç—Ä–æ–∫–∏:** 60-100

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
```python
# –ë–´–õ–û:
assert spec.garch_windows[0] == 42  # –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

# –°–¢–ê–õ–û:
assert spec.garch_windows[0] == 50  # –ü–†–ê–í–ò–õ–¨–ù–û
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** GARCH —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 50 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏.

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¢–µ—Å—Ç—ã

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
pytest test_fixes_verification.py -v
pytest test_4h_migration_fixes.py -v
pytest test_config_defaults_4h.py -v
pytest test_execution_profiles_4h.py -v
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –ü—Ä–∏–∑–Ω–∞–∫–æ–≤

```bash
python make_features.py --help
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –¥–µ—Ñ–æ–ª—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–ª—è 4h
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–Ω–∂–µ—Å—Ç

```bash
python incremental_klines_4h.py
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ INTERVAL_MS = 14_400_000
```

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ú–∏–≥—Ä–∞—Ü–∏—è —Å 1h –Ω–∞ 4h –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!**

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ü—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: **23**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: **47**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤: **35**
- ‚ùå –ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º: **1** (–≤ —Ç–µ—Å—Ç–µ)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º: **1**

### –ö–ª—é—á–µ–≤—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è:
1. ‚úÖ –¢–∞–π–º—Ñ—Ä–µ–π–º: `1h ‚Üí 4h` (14,400,000 –º—Å)
2. ‚úÖ Sigma window: `120 ‚Üí 42` –±–∞—Ä–æ–≤ (7 –¥–Ω–µ–π)
3. ‚úÖ –í—Å–µ –æ–∫–Ω–∞ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã: –º–∏–Ω—É—Ç—ã ‚Üí –±–∞—Ä—ã
4. ‚úÖ Execution profiles: `H1 ‚Üí 4H`
5. ‚úÖ GARCH –º–∏–Ω–∏–º—É–º: `50 –±–∞—Ä–æ–≤` (200h)

### –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:
- ‚úÖ 100% —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É `transformers.py` –∏ `mediator.py`
- ‚úÖ 100% —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ 100% —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –Ω–∞ 4h —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ! üöÄ**
