# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π split –¥–∞–Ω–Ω—ã—Ö

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π train/val/test split:

### 1. –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö (–î–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è split)

```
================================================================================
DATA COVERAGE ANALYSIS
================================================================================
  BTCUSDT     :   5000 rows | 2023-01-01T00:00:00Z ‚Üí 2023-07-29T08:00:00Z
  ETHUSDT     :   5000 rows | 2023-01-01T00:00:00Z ‚Üí 2023-07-29T08:00:00Z

  Overall data range:
    Start: 2023-01-01T00:00:00Z
    End:   2023-07-29T08:00:00Z
    Duration: 209.3 days
    Total rows: 10000

  Configured splits from config:
    train: [2017-07-14T00:00:00Z .. 2025-03-31T23:59:59Z]
    val  : [2025-04-01T00:00:00Z .. 2025-06-30T23:59:59Z]
    test : [2025-07-01T00:00:00Z .. 2025-09-30T23:59:59Z]

  ‚ö†Ô∏è  WARNING: Configured time splits DO NOT cover your data!
  ‚ö†Ô∏è  Your data: 2023-01-01T00:00:00Z ‚Üí 2023-07-29T08:00:00Z
  ‚ö†Ô∏è  Most/all rows would be ignored!

  üí° AUTOMATIC FIX: Creating optimal split based on YOUR data...

  ‚úÖ AUTO-GENERATED SPLITS (70% train, 15% val, 15% test):
    train: [2023-01-01T00:00:00Z .. 2023-05-18T00:48:00Z]
    val:   [2023-05-18T00:48:01Z .. 2023-07-03T17:24:00Z]
    test:  [2023-07-03T17:24:01Z .. 2023-07-29T08:00:00Z]

  üí° To use custom splits, update config with YOUR data timestamps!
================================================================================
```

### 2. –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è split

```
================================================================================
FINAL TRAIN/VAL/TEST SPLIT SUMMARY
================================================================================

Overall split distribution:
  Phase        Rows   Percentage   Symbols
  ---------- --------  ----------  --------
  ‚úÖ TRAIN       7000      70.0%         2
  ‚úÖ VAL         1500      15.0%         2
  ‚úÖ TEST        1500      15.0%         2
  ---------- --------  ----------  --------
  TOTAL         10000     100.0%

Detailed breakdown by phase:

  TRAIN:
    Configured intervals: [2023-01-01T00:00:00Z .. 2023-05-18T00:48:00Z]
    Actual data range: 2023-01-01T00:00:00Z ‚Üí 2023-05-18T00:48:00Z
    Total rows: 7,000
    Symbols covered: 2
    Per-symbol breakdown:
      BTCUSDT    :  3,500 rows
      ETHUSDT    :  3,500 rows

  VAL:
    Configured intervals: [2023-05-18T00:48:01Z .. 2023-07-03T17:24:00Z]
    Actual data range: 2023-05-18T00:48:01Z ‚Üí 2023-07-03T17:24:00Z
    Total rows: 1,500
    Symbols covered: 2
    Per-symbol breakdown:
      BTCUSDT    :    750 rows
      ETHUSDT    :    750 rows

  TEST:
    Configured intervals: [2023-07-03T17:24:01Z .. 2023-07-29T08:00:00Z]
    Actual data range: 2023-07-03T17:24:01Z ‚Üí 2023-07-29T08:00:00Z
    Total rows: 1,500
    Symbols covered: 2
    Per-symbol breakdown:
      BTCUSDT    :    750 rows
      ETHUSDT    :    750 rows

  ‚úÖ Training data size looks good: 7,000 rows
  ‚úÖ Validation data size looks good: 1,500 rows
================================================================================
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. –°—Ä–∞–≤–Ω–∏—Ç —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. –ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π split 70/15/15
4. –ü–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

```bash
# –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–µ –Ω—É–∂–Ω–æ!
python train_model_multi_patch.py --config configs/config_train.yaml
```

### –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, –æ–±–Ω–æ–≤–∏—Ç–µ `configs/config_train.yaml`:

```yaml
data:
  # –£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –í–ê–®–ò–• –¥–∞–Ω–Ω—ã—Ö
  train_start_ts: 1672531200    # –í–∞—à–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö
  train_end_ts: 1688169600      # 70% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞
  val_start_ts: 1688169601      # –°–ª–µ–¥—É—é—â–∞—è —Å–µ–∫—É–Ω–¥–∞
  val_end_ts: 1695859200        # +15% –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞
  test_start_ts: 1695859201     # –°–ª–µ–¥—É—é—â–∞—è —Å–µ–∫—É–Ω–¥–∞
  test_end_ts: 1703548800       # –í–∞—à–∞ –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –¥–∞–Ω–Ω—ã—Ö
```

–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä timestamp:
```bash
# –ò–∑ –¥–∞—Ç—ã –≤ timestamp
date -d "2023-01-01 00:00:00" +%s

# –ò–∑ timestamp –≤ –¥–∞—Ç—É
date -d @1672531200
```

## –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö

### ‚úÖ –•–æ—Ä–æ—à–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
```
‚úÖ AUTO-GENERATED SPLITS (70% train, 15% val, 15% test)
‚úÖ Training data size looks good: 7,000 rows
‚úÖ Validation data size looks good: 1,500 rows
```

### ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
```
‚ö†Ô∏è  WARNING: Only 150 training rows (recommended: 1000+)
‚ö†Ô∏è  WARNING: Very small validation set (20 rows)
‚ö†Ô∏è  WARNING: 500 rows were NOT assigned to any phase!
```

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
```
‚ùå CRITICAL: Only 30 training rows! Need at least 50.
‚ùå CRITICAL: No validation data! Cannot evaluate model.
```

## –ì–∞—Ä–∞–Ω—Ç–∏–∏

‚úÖ **–í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π split –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å –¥–∏–∞–ø–∞–∑–æ–Ω
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏** - 70% train, 15% val, 15% test (–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞)
‚úÖ **–ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥–∏—Ç–µ —Ç–æ—á–Ω–æ —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∫—É–¥–∞ –ø–æ–ø–∞–ª–æ
‚úÖ **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–æ –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è
‚úÖ **–ù–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –∫–æ–º–∞–Ω–¥** - –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–æ–¥–∫—É –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
cat artifacts/training_summary.json

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ:
# {
#   "rows": 10000,
#   "by_role": {
#     "train": 7000,    # ~70%
#     "val": 1500,      # ~15%
#     "test": 1500      # ~15%
#   }
# }
```
